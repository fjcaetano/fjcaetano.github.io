


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<head>


<meta charset="utf-8">
<meta http-equiv="cleartype" content="on">

<title>Using Native and Non-native Animations Together - License to Kill -9</title>
<meta name="author" content="FlÃ¡vio Caetano">




<meta name="description" content="Mobile developer, kart aficionado, cinephile and musician in spare times. Not necessarily in that order.">

<meta name="keywords" content="react-native animations ">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Twitter Cards -->

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/images/abstract-5.jpg"
  
  <meta name="twitter:title" content="Using native and non-native animations together">
  <meta name="twitter:description" content="Mobile developer, kart aficionado, cinephile and musician in spare times. Not necessarily in that order.">
  <meta name="twitter:creator" content="@flavio_caetano">


<!-- Open Graph -->
<meta property="og:local" content="en_US">
<meta property="og:type" content="article">
<meta property="og:url" content="http://blog.flaviocaetano.com/post/using-native-and-non-native-animations-together">
<meta property="og:title" content="Using native and non-native animations together">
<meta property="og:description" content="Mobile developer, kart aficionado, cinephile and musician in spare times. Not necessarily in that order.">

  <meta property="og:image" content="/images/abstract-5.jpg">

<meta property="og:site_name" content="License to Kill -9">

<link rel="canonical" href="http://blog.flaviocaetano.com/post/using-native-and-non-native-animations-together">
<link href="/favicon.png" rel="icon">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link href="/atom.xml" rel="alternate" title="License to Kill -9" type="application/atom+xml">

<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
<script>Modernizr || document.write('<script src="/javascripts/vendor/modernizr-2.6.2.custom.min.js"><\/script>') </script>



<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="https://secure.gravatar.com/avatar/3b339db885930633b86d73b97a2ca1c0?s=175" alt="FlÃ¡vio Caetano photo" class="author-photo">
					<h4>FlÃ¡vio Caetano</h4>
					<p>Mobile developer, kart aficionado, cinephile and musician in spare times. Not necessarily in that order.</p>
				</li>
				
				<li>
					<a href="mailto:flavio@vieiracaetano.com"><i class="fa fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/flavio_caetano"><i class="fa fa-twitter"></i> Twitter</a>
				</li>
				
				<li>
					<a href="https://github.com/fjcaetano"><i class="fa fa-github"></i> GitHub</a>
				</li>
				<li>
					<a href="https://www.linkedin.com/in/flavio-vieira-caetano-8267851a/"><i class="fa fa-linkedin"></i> LinkedIn</a>
				</li>
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/archives/">Archives</a></li>
				<li><a href="/categories/">All Categories</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div class="entry-header">
  
  <div class="entry-image">
    <img src="/images/abstract-5.jpg" alt="Using native and non-native animations together">
  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->


<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="/post/using-native-and-non-native-animations-together/" rel="bookmark" title="Using native and non-native animations together">Using Native and Non-native Animations Together</a></h1>
        
        <h2>November 11, 2019</h2>
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">

      

      <p>React-Native animations has some limitations on what can be done using the native driver and what
can only be executed in the Javascript realm. Animating colors is an example of property you can
only animate using the JS interpreter, which is super slow and will probably affect your
performance. If you try and hang a few <code>interpolates</code> in that <code>Animated.Value</code>, youâ€™ll have a bad
time trying to have fluid and seemless animations.</p>

<p>If only there was a way of using one <code>Animated.Value</code> to drive another <code>Animated.Value</code>â€¦</p>

<p><img src="https://media.giphy.com/media/2H67VmB5UEBmU/giphy.gif" alt="thinking gif" /></p>

<blockquote>
  <p>ðŸ’¡ What if you use a native animationâ€™s listener to drive a non-native animation?</p>
</blockquote>

<!-- more -->

<p>Yes, thatâ€™s possible. No, using a listener doesnâ€™t automatically make your animation non-native.
This means youâ€™ll need multiple <code>Animated.Values</code> (if that wasnâ€™t clear yet):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
</pre></td><td class="code"><pre><code class="js"><span class="line"><span class="kr">const</span> <span class="nx">nativeAnim</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Animated</span><span class="p">.</span><span class="nx">Value</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// 1</span>
</span><span class="line"><span class="kr">const</span> <span class="nx">jsAnim</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Animated</span><span class="p">.</span><span class="nx">Value</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="c1">// component did mount</span>
</span><span class="line"><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="line">  <span class="c1">// this is the trick: drive the non-native animation by adding a listener to the native animation</span>
</span><span class="line">  <span class="kr">const</span> <span class="nx">nativeListener</span> <span class="o">=</span> <span class="nx">nativeAnim</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">Animated</span><span class="p">.</span><span class="nx">event</span><span class="p">([{</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">jsAnim</span> <span class="p">}]));</span> <span class="c1">// 3</span>
</span><span class="line">  <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="line">    <span class="nx">nativeAnim</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="nx">nativeListener</span><span class="p">);</span>
</span><span class="line">  <span class="p">};</span>
</span><span class="line"><span class="p">},</span> <span class="p">[]);</span>
</span><span class="line">
</span><span class="line"><span class="c1">// backgroundColor can only be animated using a non-native animation</span>
</span><span class="line"><span class="kr">const</span> <span class="nx">bgColorStyle</span> <span class="o">=</span> <span class="nx">jsAnim</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">({</span> <span class="c1">// 4</span>
</span><span class="line">  <span class="nx">inputRange</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
</span><span class="line">  <span class="nx">outputRange</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;black&#39;</span><span class="p">],</span>
</span><span class="line"><span class="p">});</span>
</span><span class="line">
</span><span class="line"><span class="c1">// using the native driver still works</span>
</span><span class="line"><span class="kr">const</span> <span class="nx">positionStyle</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">transform</span><span class="o">:</span> <span class="p">[{</span>
</span><span class="line">    <span class="nx">translateX</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">nativeAnim</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">({</span>
</span><span class="line">      <span class="nx">inputRange</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
</span><span class="line">      <span class="nx">outputRange</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
</span><span class="line">    <span class="p">}),</span>
</span><span class="line">  <span class="p">}],</span>
</span><span class="line"><span class="p">};</span>
</span><span class="line">
</span><span class="line"><span class="p">...</span>
</span><span class="line">
</span><span class="line"><span class="o">&lt;</span><span class="nx">ScrollView</span>
</span><span class="line">  <span class="nx">onScroll</span><span class="o">=</span><span class="p">{</span>
</span><span class="line">    <span class="nx">Animated</span><span class="p">.</span><span class="nx">event</span><span class="p">([{</span>
</span><span class="line">      <span class="nx">nativeEvent</span><span class="o">:</span> <span class="p">{</span>
</span><span class="line">        <span class="nx">contentOffset</span><span class="o">:</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="nx">nativeAnim</span> <span class="p">},</span> <span class="c1">// 2</span>
</span><span class="line">      <span class="p">},</span>
</span><span class="line">    <span class="p">},</span> <span class="p">{</span> <span class="nx">useNativeDriver</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}])</span>
</span><span class="line">  <span class="p">}</span> <span class="c1">// ðŸŽ‰</span>
</span><span class="line"><span class="o">/&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Letâ€™s recap whatâ€™s up there:</p>

<ol>
  <li>We defined <code>nativeAnim</code> and <code>jsAnim</code>, which are <code>Animated.Value</code>.</li>
  <li>This value is driven by a <strong>native</strong> <code>Animated.event</code> triggered by a ScrollViewâ€™s offset.</li>
  <li>We added a listener to <code>nativeAnim</code> to drive a second <code>Animated.Value</code>, by using a non-native
<code>Animated.event</code>.</li>
  <li>The non-native animation (<code>jsAnim</code>) is then used to animate a <code>backgroundColor</code>, which is a style
property that can only be animated by non-native animations.</li>
</ol>

<p>That truly works, check it out:</p>

<div data-snack-id="Sk-4eLvir" data-snack-platform="ios" data-snack-preview="true" data-snack-theme="light" style="overflow:hidden;background:#fafafa;border:1px solid rgba(0,0,0,.08);border-radius:4px;height:505px;width:100%"></div>
<script async="" src="https://snack.expo.io/embed.js"></script>


      <footer class="entry-meta">
        <span class="entry-tags"><a href="/categories/#react-native" title="Pages tagged react-native" class="tag">react-native</a><a href="/categories/#animations" title="Pages tagged animations" class="tag">animations</a></span>
        <span><a href="/post/using-native-and-non-native-animations-together/" rel="bookmark" title="Using native and non-native animations together">Using native and non-native animations together</a> was published on <span class="entry-date date published updated"><time datetime="2019-11-11T17:36:36-03:00">November 11, 2019</time></span></span>
        
        <span class="author vcard"><span class="fn"><a href="https://flaviocaetano.com" title="About FlÃ¡vio Caetano">FlÃ¡vio Caetano</a></span></span>
        <div class="social-share">
          <ul class="socialcount socialcount-small inline-list">
            <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.flaviocaetano.com/post/using-native-and-non-native-animations-together" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
            <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://blog.flaviocaetano.com/post/using-native-and-non-native-animations-together" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
            <li class="googleplus"><a href="https://plus.google.com/share?url=http://blog.flaviocaetano.com/post/using-native-and-non-native-animations-together" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
          </ul>
        </div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    
      <div class="read-more">
        
          <div class="read-more-header">
            <a href="/post/rogue-bit/" class="btn">Read More</a>
          </div><!-- /.read-more-header -->
          <div class="read-more-content">
            <h3><a href="/post/rogue-bit/" title="Rogue Bit ðŸ•¹">Rogue Bit ðŸ•¹</a></h3>
            <p>I have a peculiar taste in video games. Iâ€™ve never been an avid gamer despite owning consoles andbuilding a gaming PC when I was younger. &hellip;&hellip; <a href="/post/rogue-bit/"> Continue reading</a></p>
          </div><!-- /.read-more-content -->
        
        <div class="read-more-list">
          
            <div class="list-item">
              <h4><a href="/post/the-art-of-coding/" title="The Art of Coding">The Art of Coding</a></h4>
              <span>Published on September 26, 2019</span>
            </div><!-- /.list-item -->
          
            <div class="list-item">
              <h4><a href="/post/react-hook-hooker/" title="Hooking Your Hooks">Hooking Your Hooks</a></h4>
              <span>Published on August 28, 2019</span>
            </div><!-- /.list-item -->
          
        </div><!-- /.read-more-list -->
      </div><!-- /.read-more -->
    
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2019 FlÃ¡vio Caetano. Powered by <a href="http://octopress.org">Octopress</a> using the <a href="https://github.com/jez/hpstr-theme/">HPSTR Theme for Octopress</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/javascripts/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/javascripts/octopress.js" type="text/javascript"></script>
<script src="/javascripts/scripts.min.js"></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36605430-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>




<script type="text/javascript">
      var disqus_shortname = 'flaviocaetanoblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.flaviocaetano.com/post/using-native-and-non-native-animations-together/';
        var disqus_url = 'http://blog.flaviocaetano.com/post/using-native-and-non-native-animations-together/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>
