---
layout: post
title: Autolayout Is Hell on Earth
date: 2013-09-12 11:24:56.000000000 -03:00
categories:
- Objective-C
tags:
- autolayout
- constraint
- frame
- ios7
- lag
- layoutifneeded
- profiler
- scroll
- scrollview
- sucks
status: publish
type: post
published: true
meta:
  _edit_last: '1'
author:
  login: fjcaetano
  email: flavio@vieiracaetano.com
  display_name: Flávio Caetano
  first_name: Flávio
  last_name: Caetano
---
<p><!--:en-->
<p style="text-align: justify;">I believe that every iOS developer is already aware of Apple's new directive forbidding any <em>apps</em> using <em>frame</em> to be submitted to the Appstore when the new iOS 7 goes public. That means that ALL new <em>app</em> will have be developed using this tool created by the son of a devil called <em>autolayout</em>.<em><br />
</em></p>
<p style="text-align: justify;">Anyone that has already used <em>autolayout</em> knows that margin, width, height and other properties are calculated in runtime, therefore, they consume sometimes unnecessary CPU time. For some inescrutable reason, Apple decided to create this new concept from scratch to ease working with different sized screens, while they could easily reuse existing CSS concepts like <em>margin</em>, <em>padding</em>, among others. In addition to being extremely confusing (a <code>UIView's</code> margin <em>constraints</em> are in its <em>superview</em>), having a pitiful syntax (“V:|-(-5)-[view1]-(&gt;=10)-[view2]-(912837)-|”), <em>autolayout</em> also makes everything slow.</p>
<p style="text-align: justify;"><strong>Protip:</strong> if you're configuring your <em>coinstraints</em> via code, <span style="text-decoration: underline;">never</span> forget seting <code>self.translatesAutoresizingMaskIntoConstraints = NO</code> in your view. It took me a couple of coffee cups to realise this was the reason why my <em>constraints</em> weren't being executing along with <code>[self layoutIfNeeded]</code>.</p>
<p style="text-align: justify;">I recently had to work with a <code>UICollectionView</code> and the scroll was getting really laggy. Anytime a new cell was loaded, the framerate dropped. After spending a few hours trying to find the root of the problem with a couple of friends (we even considered the problem being the SDK's <code>dequeue</code> thanks to <em>Profiler</em>) some inspired insight hit us and we decided to disable <em>autolayout</em> on the <code>UICollectionViewCell's</code> xib and everything flowed like a beautiful stream under the morning sunlight of tropical woods. So let us analise what happened: Apple created a new concept, from the grounds, that theoretically would solve all problems when working with screens of different sizes, but this devilish concept is composed of runtime calculated values that ruin the <em>app's</em> smoothness. Yep, it gets hard to work happily...</p>
<p style="text-align: justify;">This view that is the <code>UICollectionView's</code> cell will not have <em>autolayout</em>. Nobody knows what will happen when we submit the <em>app</em> to the Appstore and we sincerely hope that Apple doesn't mind this view that, although is not explicitly using <em>frames</em>, also is not configured to accept <em>autolayout</em>.</p>
<p style="text-align: justify;">I'm yet to find an iOS developer that has nothing to complain about this weird invention, but, as usual, Apple's "this is what we want, so deal with it" policy doesn't give us any alternatives. Instead of easing developers' work, they're making our daily lives every more difficult while <del>Android scores another point</del> Apple is walking backwards.</p>
